<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON to GET Request Converter - OOPEN AII</title>
    <meta name="description" content="Convert JSON objects to URL query parameters for GET requests easily">
    <meta name="keywords" content="json to get, json to query parameters, url query string generator, json converter">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="icon" href="../images/logo.svg" type="image/svg+xml">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6486368477427533"
      crossorigin="anonymous"></script>
    <style>
        .tool-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .tool-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .tool-icon-large {
            font-size: 64px;
            margin-bottom: 20px;
        }
        
        .tool-description {
            color: #666;
            font-size: 18px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .tool-content {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }
        
        .converter-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .textarea-container {
            position: relative;
        }
        
        textarea {
            width: 100%;
            min-height: 300px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
            transition: border-color 0.3s ease;
        }
        
        textarea:focus {
            outline: none;
            border-color: #2196F3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }
        
        .url-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            margin-bottom: 15px;
            transition: border-color 0.3s ease;
        }
        
        .url-input:focus {
            outline: none;
            border-color: #2196F3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }
        
        .button-group {
            display: flex;
            gap: 12px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background-color: #2196F3;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #1976D2;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(33, 150, 243, 0.3);
        }
        
        .btn-secondary {
            background-color: #4CAF50;
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #45a049;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(76, 175, 80, 0.3);
        }
        
        .btn-outline {
            background-color: transparent;
            border: 2px solid #ddd;
            color: #666;
        }
        
        .btn-outline:hover {
            background-color: #f5f5f5;
            border-color: #ccc;
        }
        
        .btn-danger {
            background-color: #f44336;
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #da190b;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(244, 67, 54, 0.3);
        }
        
        .preview-container {
            margin-top: 30px;
            background-color: #f8f9fa;
            border-radius: 6px;
            padding: 20px;
            border: 1px solid #ddd;
        }
        
        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .full-url {
            background-color: #fff;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #ddd;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            word-break: break-all;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        
        .param-list {
            background-color: #fff;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #ddd;
            margin-top: 15px;
        }
        
        .param-item {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .param-item:last-child {
            border-bottom: none;
        }
        
        .param-name {
            font-weight: 600;
            color: #2196F3;
        }
        
        .param-value {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            color: #666;
        }
        
        .status-message {
            padding: 12px 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            display: none;
        }
        
        .success-message {
            background-color: #e8f5e9;
            color: #2e7d32;
            border-left: 4px solid #4caf50;
        }
        
        .error-message {
            background-color: #ffebee;
            color: #d32f2f;
            border-left: 4px solid #f44336;
        }
        
        .options-group {
            margin-bottom: 20px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 6px;
            border: 1px solid #ddd;
        }
        
        .options-header {
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .option-item {
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .option-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .option-item label {
            cursor: pointer;
            font-weight: normal;
            margin-bottom: 0;
        }
        
        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 6px 10px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .copy-btn:hover {
            background-color: #e9ecef;
            border-color: #adb5bd;
        }
        
        .copy-btn.copied {
            background-color: #28a745;
            color: white;
            border-color: #28a745;
        }
        
        .features-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .feature-card {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        
        .feature-icon {
            font-size: 32px;
            margin-bottom: 15px;
        }
        
        .feature-title {
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .feature-description {
            color: #666;
            font-size: 14px;
        }
        
        .examples-section {
            margin-top: 30px;
        }
        
        .examples-header {
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .example-tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 15px;
            overflow-x: auto;
        }
        
        .example-tab {
            padding: 10px 15px;
            cursor: pointer;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-bottom: none;
            margin-right: 5px;
            border-radius: 6px 6px 0 0;
            white-space: nowrap;
        }
        
        .example-tab.active {
            background-color: white;
            border-bottom: 1px solid white;
            margin-bottom: -1px;
        }
        
        .example-content {
            display: none;
            padding: 15px;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 0 6px 6px 6px;
        }
        
        .example-content.active {
            display: block;
        }
        
        @media (max-width: 768px) {
            .tool-container {
                padding: 10px;
            }
            
            .tool-content {
                padding: 20px;
            }
            
            .converter-container {
                grid-template-columns: 1fr;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
            
            .param-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="logo">
                <a href="../index.html">
                    <img src="../images/logo.png" alt="OOPEN AII Logo">
                </a>
                <h1>OOPEN AII</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="../index.html">Image Tools</a></li>
                    <li class="active"><a href="../dav.html">Dav</a></li>
                    <li><a href="../about.html">About</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <div class="tool-container">
            <div class="tool-header">
                <div class="tool-icon-large">🔄</div>
                <h2>JSON to GET Request Converter</h2>
                <p class="tool-description">Easily convert JSON objects to URL query parameters for GET requests with customizable options.</p>
            </div>
            
            <div class="tool-content">
                <div id="statusMessage" class="status-message"></div>
                
                <div class="options-group">
                    <div class="options-header">Conversion Options:</div>
                    <div class="option-item">
                        <input type="checkbox" id="flattenNested" checked>
                        <label for="flattenNested">Flatten nested objects</label>
                    </div>
                    <div class="option-item">
                        <input type="checkbox" id="encodeParams" checked>
                        <label for="encodeParams">URL encode parameters</label>
                    </div>
                    <div class="option-item">
                        <input type="checkbox" id="includeEmptyValues">
                        <label for="includeEmptyValues">Include empty values</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="baseUrl">Base URL (optional):</label>
                    <input type="text" id="baseUrl" class="url-input" placeholder="https://example.com/api">
                </div>
                
                <div class="converter-container">
                    <div>
                        <div class="form-group">
                            <label for="jsonInput">JSON Input:</label>
                            <div class="textarea-container">
                                <textarea id="jsonInput" placeholder="Enter your JSON object here...">{
  "name": "John Doe",
  "age": 30,
  "active": true,
  "tags": ["developer", "javascript"],
  "address": {
    "city": "New York",
    "zip": "10001",
    "country": "USA"
  }
}</textarea>
                                <button id="copyJsonBtn" class="copy-btn">Copy</button>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="form-group">
                            <label for="queryOutput">Query Parameters:</label>
                            <div class="textarea-container">
                                <textarea id="queryOutput" placeholder="Converted query parameters will appear here..." readonly></textarea>
                                <button id="copyQueryBtn" class="copy-btn">Copy</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="button-group">
                    <button id="convertBtn" class="btn btn-primary">Convert JSON</button>
                    <button id="clearBtn" class="btn btn-outline">Clear All</button>
                    <button id="loadExampleBtn" class="btn btn-outline">Load Example</button>
                    <button id="reverseConvertBtn" class="btn btn-secondary">Convert to JSON</button>
                </div>
                
                <div class="preview-container">
                    <div class="preview-header">
                        <span>Full URL Preview:</span>
                        <button id="copyFullUrlBtn" class="btn btn-outline" style="padding: 6px 12px; font-size: 14px;">Copy URL</button>
                    </div>
                    <div id="fullUrlPreview" class="full-url">
                        <!-- Full URL will appear here -->
                    </div>
                    
                    <div class="preview-header" style="margin-top: 20px;">Query Parameters Breakdown:</div>
                    <div id="paramListPreview" class="param-list">
                        <!-- Parameter list will appear here -->
                    </div>
                </div>
                
                <div class="examples-section">
                    <div class="examples-header">Examples:</div>
                    <div class="example-tabs">
                        <div class="example-tab active" data-example="simple">Simple Object</div>
                        <div class="example-tab" data-example="nested">Nested Object</div>
                        <div class="example-tab" data-example="arrays">Arrays</div>
                        <div class="example-tab" data-example="special">Special Characters</div>
                    </div>
                    <div id="simple-example" class="example-content active">
                        <p><strong>JSON:</strong></p>
                        <pre>{"name": "John", "age": 25, "active": true}</pre>
                        <p><strong>Query String:</strong></p>
                        <pre>name=John&age=25&active=true</pre>
                    </div>
                    <div id="nested-example" class="example-content">
                        <p><strong>JSON:</strong></p>
                        <pre>{"user": {"name": "John", "contact": {"email": "john@example.com"}}}</pre>
                        <p><strong>Query String (with flattening):</strong></p>
                        <pre>user.name=John&user.contact.email=john@example.com</pre>
                    </div>
                    <div id="arrays-example" class="example-content">
                        <p><strong>JSON:</strong></p>
                        <pre>{"colors": ["red", "green", "blue"], "numbers": [1, 2, 3]}</pre>
                        <p><strong>Query String:</strong></p>
                        <pre>colors=red&colors=green&colors=blue&numbers=1&numbers=2&numbers=3</pre>
                    </div>
                    <div id="special-example" class="example-content">
                        <p><strong>JSON:</strong></p>
                        <pre>{"search": "hello world", "filter": "price>100"}</pre>
                        <p><strong>Query String (encoded):</strong></p>
                        <pre>search=hello%20world&filter=price%3E100</pre>
                    </div>
                </div>
            </div>
            
            <!-- Features Section -->
            <div style="margin-top: 40px;">
                <h3>Key Features</h3>
                <div class="features-list">
                    <div class="feature-card">
                        <div class="feature-icon">🔄</div>
                        <div class="feature-title">Bi-directional Conversion</div>
                        <div class="feature-description">Convert JSON to query parameters and vice versa with just one click.</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">📦</div>
                        <div class="feature-title">Nested Objects Support</div>
                        <div class="feature-description">Handles nested JSON structures by flattening them into dot notation.</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">🔢</div>
                        <div class="feature-title">Array Handling</div>
                        <div class="feature-description">Properly converts arrays into multiple query parameters with the same name.</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">🔒</div>
                        <div class="feature-title">URL Encoding</div>
                        <div class="feature-description">Automatically encodes special characters to ensure valid URL query strings.</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">⚙️</div>
                        <div class="feature-title">Customizable Options</div>
                        <div class="feature-description">Control how your data is converted with various formatting options.</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">🎯</div>
                        <div class="feature-title">Full URL Preview</div>
                        <div class="feature-description">See the complete URL with query parameters for easy testing.</div>
                    </div>
                </div>
            </div>
            
            <!-- Tips Section -->
            <div style="margin-top: 40px; background-color: #f8f9fa; padding: 30px; border-radius: 8px;">
                <h3>Usage Tips</h3>
                <ul style="text-align: left; max-width: 800px; margin: 0 auto;">
                    <li>For nested objects, use the "Flatten nested objects" option to convert them to dot notation</li>
                    <li>Always URL encode parameters when dealing with special characters or spaces</li>
                    <li>Add a base URL to see the complete request URL</li>
                    <li>Use the reverse conversion to parse query parameters back into JSON</li>
                    <li>Empty values can be excluded to keep the URL cleaner</li>
                </ul>
            </div>
            
            <!-- Related Tools -->
            <div style="margin-top: 40px;">
                <h3>Related Tools</h3>
                <div style="display: flex; gap: 15px; flex-wrap: wrap; justify-content: center; margin-top: 20px;">
                    <a href="json-formatter.html" style="text-decoration: none; color: #2196F3;">JSON Formatter</a>
                    <a href="url-encoder.html" style="text-decoration: none; color: #2196F3;">URL Encoder/Decoder</a>
                    <a href="js-debugger.html" style="text-decoration: none; color: #2196F3;">JS Debugger</a>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <p>&copy; 2024 OOPEN AII. All rights reserved.</p>
                <div class="footer-links">
                    <a href="../privacy.html">Privacy Policy</a>
                    <a href="../terms.html">Terms of Service</a>
                    <a href="../contact.html">Contact</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const jsonInput = document.getElementById('jsonInput');
            const queryOutput = document.getElementById('queryOutput');
            const convertBtn = document.getElementById('convertBtn');
            const reverseConvertBtn = document.getElementById('reverseConvertBtn');
            const clearBtn = document.getElementById('clearBtn');
            const loadExampleBtn = document.getElementById('loadExampleBtn');
            const baseUrl = document.getElementById('baseUrl');
            const fullUrlPreview = document.getElementById('fullUrlPreview');
            const paramListPreview = document.getElementById('paramListPreview');
            const statusMessage = document.getElementById('statusMessage');
            const copyJsonBtn = document.getElementById('copyJsonBtn');
            const copyQueryBtn = document.getElementById('copyQueryBtn');
            const copyFullUrlBtn = document.getElementById('copyFullUrlBtn');
            const flattenNested = document.getElementById('flattenNested');
            const encodeParams = document.getElementById('encodeParams');
            const includeEmptyValues = document.getElementById('includeEmptyValues');
            const exampleTabs = document.querySelectorAll('.example-tab');
            const exampleContents = document.querySelectorAll('.example-content');
            
            // Show status message
            function showStatus(message, isError = false) {
                statusMessage.textContent = message;
                statusMessage.className = `status-message ${isError ? 'error-message' : 'success-message'}`;
                statusMessage.style.display = 'block';
                
                // Hide after 3 seconds
                setTimeout(() => {
                    statusMessage.style.display = 'none';
                }, 3000);
            }
            
            // Copy to clipboard function
            async function copyToClipboard(text, button) {
                try {
                    await navigator.clipboard.writeText(text);
                    const originalText = button.textContent;
                    button.textContent = 'Copied!';
                    button.classList.add('copied');
                    
                    // Reset button after 2 seconds
                    setTimeout(() => {
                        button.textContent = originalText;
                        button.classList.remove('copied');
                    }, 2000);
                    
                    return true;
                } catch (err) {
                    console.error('Failed to copy:', err);
                    return false;
                }
            }
            
            // URL encode a value if option is enabled
            function encodeIfEnabled(value) {
                return encodeParams.checked ? encodeURIComponent(value) : value;
            }
            
            // Convert JSON to query string
            function jsonToQueryString(json) {
                const params = [];
                
                // Recursive function to handle nested objects and arrays
                function processObject(obj, parentKey = '') {
                    Object.entries(obj).forEach(([key, value]) => {
                        // Create the parameter name (handle nesting)
                        const paramName = parentKey ? 
                            (flattenNested.checked ? `${parentKey}.${key}` : key) : 
                            key;
                        
                        // Skip empty values if option is disabled
                        if (!includeEmptyValues.checked) {
                            if (value === '' || value === null || value === undefined) {
                                return;
                            }
                        }
                        
                        // Handle different types of values
                        if (Array.isArray(value)) {
                            // For arrays, add each element as a separate parameter
                            value.forEach(item => {
                                params.push(`${encodeIfEnabled(paramName)}=${encodeIfEnabled(String(item))}`);
                            });
                        } else if (typeof value === 'object' && value !== null) {
                            // For nested objects, recurse
                            processObject(value, paramName);
                        } else {
                            // For primitive values, add directly
                            params.push(`${encodeIfEnabled(paramName)}=${encodeIfEnabled(String(value))}`);
                        }
                    });
                }
                
                processObject(json);
                return params.join('&');
            }
            
            // Convert query string to JSON
            function queryStringToJson(queryString) {
                const result = {};
                
                // Remove leading '?' if present
                const cleanQuery = queryString.trim().startsWith('?') 
                    ? queryString.trim().substring(1) 
                    : queryString.trim();
                
                if (!cleanQuery) return {};
                
                // Split into key-value pairs
                cleanQuery.split('&').forEach(pair => {
                    const [rawKey, rawValue] = pair.split('=');
                    const key = encodeParams.checked ? decodeURIComponent(rawKey) : rawKey;
                    const value = encodeParams.checked && rawValue !== undefined ? decodeURIComponent(rawValue) : rawValue;
                    
                    // Handle dot notation for nested objects
                    if (flattenNested.checked && key.includes('.')) {
                        const keys = key.split('.');
                        let current = result;
                        
                        // Navigate to the parent object
                        for (let i = 0; i < keys.length - 1; i++) {
                            if (!current[keys[i]]) {
                                current[keys[i]] = {};
                            }
                            current = current[keys[i]];
                        }
                        
                        // Add the value to the last key
                        current[keys[keys.length - 1]] = parseValue(value);
                    } else {
                        // Handle array parameters (multiple keys with the same name)
                        if (key in result) {
                            if (!Array.isArray(result[key])) {
                                result[key] = [result[key]];
                            }
                            result[key].push(parseValue(value));
                        } else {
                            result[key] = parseValue(value);
                        }
                    }
                });
                
                return result;
            }
            
            // Parse string value to appropriate type
            function parseValue(value) {
                // Handle empty values
                if (value === undefined || value === '') {
                    return '';
                }
                
                // Try to parse as number
                if (!isNaN(value) && !isNaN(parseFloat(value))) {
                    return parseFloat(value);
                }
                
                // Try to parse as boolean
                if (value.toLowerCase() === 'true') return true;
                if (value.toLowerCase() === 'false') return false;
                
                // Try to parse as null
                if (value.toLowerCase() === 'null') return null;
                
                // Try to parse as JSON
                try {
                    return JSON.parse(value);
                } catch (e) {
                    // If all else fails, return as string
                    return value;
                }
            }
            
            // Update the full URL preview
            function updateFullUrlPreview(queryString) {
                const url = baseUrl.value.trim();
                if (!url) {
                    fullUrlPreview.textContent = queryString || 'No query parameters to display';
                    return;
                }
                
                const separator = url.includes('?') ? '&' : '?';
                fullUrlPreview.textContent = queryString 
                    ? `${url}${separator}${queryString}` 
                    : url;
            }
            
            // Update the parameter list preview
            function updateParamListPreview(queryString) {
                if (!queryString) {
                    paramListPreview.innerHTML = '<p>No query parameters to display</p>';
                    return;
                }
                
                const params = {};
                
                // Parse the query string
                queryString.split('&').forEach(pair => {
                    const [key, value] = pair.split('=');
                    const decodedKey = decodeURIComponent(key);
                    const decodedValue = decodeURIComponent(value || '');
                    
                    if (decodedKey in params) {
                        if (!Array.isArray(params[decodedKey])) {
                            params[decodedKey] = [params[decodedKey]];
                        }
                        params[decodedKey].push(decodedValue);
                    } else {
                        params[decodedKey] = decodedValue;
                    }
                });
                
                // Generate the HTML for the parameter list
                let html = '';
                Object.entries(params).forEach(([name, value]) => {
                    if (Array.isArray(value)) {
                        value.forEach((v, index) => {
                            html += `
                                <div class="param-item">
                                    <span class="param-name">${name}</span>
                                    <span class="param-value">${v}</span>
                                </div>
                            `;
                        });
                    } else {
                        html += `
                            <div class="param-item">
                                <span class="param-name">${name}</span>
                                <span class="param-value">${value}</span>
                            </div>
                        `;
                    }
                });
                
                paramListPreview.innerHTML = html;
            }
            
            // Load example JSON
            function loadExample() {
                jsonInput.value = `{
  "name": "John Doe",
  "age": 30,
  "active": true,
  "tags": ["developer", "javascript"],
  "address": {
    "city": "New York",
    "zip": "10001",
    "country": "USA"
  },
  "preferences": {
    "theme": "dark",
    "notifications": false,
    "settings": {
      "language": "en",
      "timezone": "UTC-5"
    }
  }
}`;
                baseUrl.value = 'https://api.example.com/users';
                showStatus('Example loaded successfully!');
            }
            
            // Event Listeners
            convertBtn.addEventListener('click', function() {
                try {
                    // Parse the JSON input
                    const json = JSON.parse(jsonInput.value);
                    
                    // Convert to query string
                    const queryString = jsonToQueryString(json);
                    
                    // Update the output
                    queryOutput.value = queryString;
                    
                    // Update previews
                    updateFullUrlPreview(queryString);
                    updateParamListPreview(queryString);
                    
                    showStatus('Conversion successful!');
                } catch (error) {
                    showStatus(`Error: ${error.message}`, true);
                }
            });
            
            reverseConvertBtn.addEventListener('click', function() {
                try {
                    // Convert query string to JSON
                    const json = queryStringToJson(queryOutput.value);
                    
                    // Update the JSON input with formatted JSON
                    jsonInput.value = JSON.stringify(json, null, 2);
                    
                    // Update previews
                    updateFullUrlPreview(queryOutput.value);
                    updateParamListPreview(queryOutput.value);
                    
                    showStatus('Reverse conversion successful!');
                } catch (error) {
                    showStatus(`Error: ${error.message}`, true);
                }
            });
            
            clearBtn.addEventListener('click', function() {
                jsonInput.value = '';
                queryOutput.value = '';
                baseUrl.value = '';
                fullUrlPreview.textContent = 'No URL to display';
                paramListPreview.innerHTML = '<p>No query parameters to display</p>';
                showStatus('All fields cleared');
            });
            
            loadExampleBtn.addEventListener('click', loadExample);
            
            // Copy buttons
            copyJsonBtn.addEventListener('click', function() {
                copyToClipboard(jsonInput.value, copyJsonBtn);
            });
            
            copyQueryBtn.addEventListener('click', function() {
                copyToClipboard(queryOutput.value, copyQueryBtn);
            });
            
            copyFullUrlBtn.addEventListener('click', function() {
                copyToClipboard(fullUrlPreview.textContent, copyFullUrlBtn);
            });
            
            // Update previews when base URL changes
            baseUrl.addEventListener('input', function() {
                updateFullUrlPreview(queryOutput.value);
            });
            
            // Update previews when options change
            flattenNested.addEventListener('change', function() {
                if (queryOutput.value) {
                    try {
                        const json = JSON.parse(jsonInput.value);
                        const newQueryString = jsonToQueryString(json);
                        queryOutput.value = newQueryString;
                        updateFullUrlPreview(newQueryString);
                        updateParamListPreview(newQueryString);
                    } catch (error) {
                        // Ignore errors if JSON is invalid
                    }
                }
            });
            
            // Example tabs
            exampleTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remove active class from all tabs and contents
                    exampleTabs.forEach(t => t.classList.remove('active'));
                    exampleContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    tab.classList.add('active');
                    document.getElementById(`${tab.dataset.example}-example`).classList.add('active');
                });
            });
            
            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                    e.preventDefault();
                    convertBtn.click();
                }
            });
            
            // Initialize with example
            loadExample();
            // Run initial conversion
            setTimeout(() => convertBtn.click(), 100);
        });
    </script>
</body>
</html>