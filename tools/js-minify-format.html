<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS Minify/Format - OOPEN AII</title>
    <meta name="description" content="Free online JS minify and format tool to compress or beautify your JavaScript code with syntax highlighting.">
    <meta name="keywords" content="JS minifier, JS formatter, JS beautifier, compress JS, beautify JS, online JS tool">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="icon" href="../images/logo.svg" type="image/svg+xml">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6486368477427533"
      crossorigin="anonymous"></script>
    <style>
        .tool-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .tool-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .tool-icon-large {
            font-size: 64px;
            margin-bottom: 20px;
        }
        
        .tool-description {
            color: #666;
            font-size: 18px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .tool-content {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        textarea {
            width: 100%;
            min-height: 300px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
            background-color: #fafafa;
            line-height: 1.5;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        
        .btn-primary {
            background-color: #4CAF50;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #45a049;
        }
        
        .btn-secondary {
            background-color: #2196F3;
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #0b7dda;
        }
        
        .btn-outline {
            background-color: transparent;
            border: 1px solid #666;
            color: #666;
        }
        
        .btn-outline:hover {
            background-color: #f5f5f5;
        }
        
        .copy-notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border-radius: 4px;
            display: none;
            z-index: 1000;
        }
        
        .copy-notification.active {
            display: block;
            animation: fadeInOut 2s ease-in-out;
        }
        
        @keyframes fadeInOut {
            0% { opacity: 0; }
            20% { opacity: 1; }
            80% { opacity: 1; }
            100% { opacity: 0; }
        }
        
        .options-group {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 6px;
            border: 1px solid #eee;
        }
        
        .option-item {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .option-item label {
            font-weight: normal;
            margin: 0;
            cursor: pointer;
        }
        
        .size-info {
            margin-top: 20px;
            padding: 15px;
            background-color: #f0f7ff;
            border-radius: 6px;
            border: 1px solid #e3f2fd;
        }
        
        .size-info p {
            margin: 5px 0;
        }
        
        .size-info strong {
            color: #1976d2;
        }
        
        .examples-container {
            margin-top: 30px;
        }
        
        .examples-header {
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .example-tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 15px;
            overflow-x: auto;
        }
        
        .example-tab {
            padding: 10px 15px;
            cursor: pointer;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-bottom: none;
            margin-right: 5px;
            border-radius: 6px 6px 0 0;
            white-space: nowrap;
        }
        
        .example-tab.active {
            background-color: white;
            border-bottom: 1px solid white;
            margin-bottom: -1px;
        }
        
        .example-content {
            display: none;
            padding: 15px;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 0 6px 6px 6px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            white-space: pre-wrap;
        }
        
        .example-content.active {
            display: block;
        }
        
        @media (max-width: 768px) {
            .tool-container {
                padding: 10px;
            }
            
            .tool-content {
                padding: 20px;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="logo">
                <a href="../index.html">
                    <img src="../images/logo.png" alt="OOPEN AII Logo">
                </a>
                <h1>OOPEN AII</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="../index.html">Image Tools</a></li>
                    <li><a href="../encry.html">Encry Tools</a></li>
                    <li><a href="../code.html" style="display:block !important;">Code Tools</a></li>
                    <li><a href="../network.html">Network Tools</a></li>
                    <li><a href="../dav.html">Dav</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <div class="container">
            <div class="breadcrumb">
                <a href="../index.html">index</a> &gt; 
                <a href="../code.html">Code Tools</a> &gt; 
                <span>Js Minify Format</span>
            </div>
        </div>
        <div class="tool-container">
            <div class="tool-header">
                <div class="tool-icon-large">âš¡</div>
                <h2>JS Minify/Format</h2>
                <p class="tool-description">Minify your JavaScript code for production or format it for better readability with this powerful online tool.</p>
            </div>
            
            <div class="tool-content">
                <div class="options-group">
                    <div class="form-group">
                        <label for="jsInput">Enter your JavaScript code:</label>
                        <textarea id="jsInput" placeholder="Paste your JavaScript code here...">function greet(name) {
  console.log("Hello, " + name + "!");
  return "Greeted " + name;
}

// Call the function
greet("World");</textarea>
                    </div>
                    
                    <div class="options-group">
                        <strong>Formatting Options:</strong>
                        <div class="option-item">
                            <input type="checkbox" id="preserveComments" checked>
                            <label for="preserveComments">Preserve comments</label>
                        </div>
                        <div class="option-item">
                            <input type="checkbox" id="formatObject" checked>
                            <label for="formatObject">Format object properties</label>
                        </div>
                        <div class="option-item">
                            <input type="checkbox" id="formatArrays" checked>
                            <label for="formatArrays">Format arrays</label>
                        </div>
                    </div>
                    
                    <div class="button-group">
                        <button class="btn btn-primary" id="formatBtn">Format JS</button>
                        <button class="btn btn-secondary" id="minifyBtn">Minify JS</button>
                        <button class="btn btn-outline" id="clearBtn">Clear</button>
                        <button class="btn btn-outline" id="loadSampleBtn">Load Sample</button>
                        <button class="btn btn-outline" id="beautifyExampleBtn">Beautify Example</button>
                        <button class="btn btn-outline" id="minifyExampleBtn">Minify Example</button>
                    </div>
                    
                    <div class="form-group">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <label for="jsOutput">Result:</label>
                            <button class="btn btn-outline" id="copyBtn" style="padding: 5px 10px; font-size: 14px;">Copy to Clipboard</button>
                        </div>
                        <textarea id="jsOutput" readonly></textarea>
                    </div>
                    
                    <div class="size-info">
                        <p><strong>Original Size:</strong> <span id="originalSize">0</span> bytes</p>
                        <p><strong>Result Size:</strong> <span id="resultSize">0</span> bytes</p>
                        <p><strong>Size Reduction:</strong> <span id="sizeReduction">0</span>%</p>
                    </div>
                </div>
            </div>

            <!-- Examples Section -->
            <div class="examples-container">
                <div class="examples-header">Examples:</div>
                <div class="example-tabs">
                    <div class="example-tab active" data-example="simple">Simple Function</div>
                    <div class="example-tab" data-example="object">Object Example</div>
                    <div class="example-tab" data-example="class">Class Example</div>
                    <div class="example-tab" data-example="complex">Complex Code</div>
                </div>
                <div id="simple-example" class="example-content active">
// Simple function example
function calculateSum(a, b) {
  return a + b;
}

const result = calculateSum(5, 3);
console.log("Sum:", result);
                </div>
                <div id="object-example" class="example-content">
// Object example
const person = {
  firstName: "John",
  lastName: "Doe",
  age: 30,
  address: {
    street: "123 Main St",
    city: "New York",
    country: "USA"
  },
  getFullName: function() {
    return this.firstName + " " + this.lastName;
  }
};

console.log(person.getFullName());
                </div>
                <div id="class-example" class="example-content">
// Class example
class Rectangle {
  constructor(width, height) {
    this.width = width;
    this.height = height;
  }
  
  getArea() {
    return this.width * this.height;
  }
  
  getPerimeter() {
    return 2 * (this.width + this.height);
  }
}

const rectangle = new Rectangle(10, 5);
console.log("Area:", rectangle.getArea());
console.log("Perimeter:", rectangle.getPerimeter());
                </div>
                <div id="complex-example" class="example-content">
// Complex code example with arrays, promises, and modern JS features
const fetchData = async (url) => {
  try {
    const response = await fetch(url);
    if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
    const data = await response.json();
    return data;
  } catch (error) {
    console.error("Error fetching data:", error);
    return null;
  }
};

const processArray = (array) => {
  return array
    .filter(item => item > 10)
    .map(item => item * 2)
    .reduce((sum, item) => sum + item, 0);
};

// Example usage
const numbers = [5, 15, 25, 35, 5];
const total = processArray(numbers);
console.log("Processed total:", total);
                </div>
            </div>

            <!-- Features Section -->
            <div style="margin-top: 40px; background-color: #f9f9f9; padding: 30px; border-radius: 8px;">
                <h3>Features</h3>
                <ul style="list-style-type: none; padding: 0; max-width: 600px; margin: 0 auto;">
                    <li style="padding: 8px 0; border-bottom: 1px solid #eee; text-align: left;">âœ¨ Beautiful code formatting with proper indentation</li>
                    <li style="padding: 8px 0; border-bottom: 1px solid #eee; text-align: left;">âš¡ Efficient JavaScript minification to reduce file size</li>
                    <li style="padding: 8px 0; border-bottom: 1px solid #eee; text-align: left;">ðŸ“Š Shows size reduction percentage</li>
                    <li style="padding: 8px 0; border-bottom: 1px solid #eee; text-align: left;">ðŸ“‹ Easy copy to clipboard functionality</li>
                    <li style="padding: 8px 0; border-bottom: 1px solid #eee; text-align: left;">ðŸ’» Works entirely in your browser</li>
                    <li style="padding: 8px 0; border-bottom: 1px solid #eee; text-align: left;">ðŸ”§ Customizable formatting options</li>
                    <li style="padding: 8px 0; text-align: left;">ðŸ“š Multiple code examples for reference</li>
                </ul>
            </div>

            <!-- Related Tools -->
            <div style="margin-top: 40px;">
                <h3>Related Tools</h3>
                <div style="display: flex; gap: 15px; flex-wrap: wrap; justify-content: center; margin-top: 20px;">
                    <a href="css-minify-format.html" style="text-decoration: none; color: #2196F3;">CSS Minify/Format</a>
                    <a href="html-minify-format.html" style="text-decoration: none; color: #2196F3;">HTML Minify/Format</a>
                    <a href="js-debugger.html" style="text-decoration: none; color: #2196F3;">JS Debugger</a>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <p>&copy; 2024 OOPEN AII. All rights reserved.</p>
                <div class="footer-links">
                    <a href="../privacy.html">Privacy Policy</a>
                    <a href="../terms.html">Terms of Service</a>
                    <a href="../contact.html">Contact</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Copy Notification -->
    <div class="copy-notification" id="copyNotification">Copied to clipboard!</div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const jsInput = document.getElementById('jsInput');
            const jsOutput = document.getElementById('jsOutput');
            const formatBtn = document.getElementById('formatBtn');
            const minifyBtn = document.getElementById('minifyBtn');
            const clearBtn = document.getElementById('clearBtn');
            const loadSampleBtn = document.getElementById('loadSampleBtn');
            const beautifyExampleBtn = document.getElementById('beautifyExampleBtn');
            const minifyExampleBtn = document.getElementById('minifyExampleBtn');
            const copyBtn = document.getElementById('copyBtn');
            const copyNotification = document.getElementById('copyNotification');
            const originalSizeEl = document.getElementById('originalSize');
            const resultSizeEl = document.getElementById('resultSize');
            const sizeReductionEl = document.getElementById('sizeReduction');
            const preserveComments = document.getElementById('preserveComments');
            const formatObject = document.getElementById('formatObject');
            const formatArrays = document.getElementById('formatArrays');
            const exampleTabs = document.querySelectorAll('.example-tab');
            const exampleContents = document.querySelectorAll('.example-content');

            // Update size information
            function updateSizeInfo() {
                const originalSize = jsInput.value.length;
                const resultSize = jsOutput.value.length;
                let reduction = 0;
                
                if (originalSize > 0) {
                    reduction = Math.round((1 - resultSize / originalSize) * 100);
                }
                
                originalSizeEl.textContent = originalSize;
                resultSizeEl.textContent = resultSize;
                sizeReductionEl.textContent = reduction;
            }

            // Format JavaScript code
            function formatJS(code) {
                if (!code.trim()) return '';
                
                try {
                    // Remove comments if option is disabled
                    if (!preserveComments.checked) {
                        // Remove single line comments
                        code = code.replace(/\/\/.*$/gm, '');
                        // Remove multi-line comments
                        code = code.replace(/\/\*[\s\S]*?\*\//g, '');
                    }
                    
                    // First, minify to normalize the code
                    let formatted = code
                        .replace(/\s+/g, ' ') // Replace multiple spaces with single space
                        .trim();
                    
                    // Now apply formatting with proper indentation
                    const indentSize = 2;
                    let indentLevel = 0;
                    let result = '';
                    let inString = false;
                    let inComment = false;
                    let lastChar = '';
                    
                    for (let i = 0; i < formatted.length; i++) {
                        const currentChar = formatted[i];
                        const nextChar = formatted[i + 1] || '';
                        
                        // Handle comments
                        if (!inString && currentChar === '/' && nextChar === '/') {
                            inComment = true;
                            result += currentChar;
                            continue;
                        }
                        if (!inString && currentChar === '/' && nextChar === '*') {
                            inComment = true;
                            result += currentChar;
                            continue;
                        }
                        if (inComment && currentChar === '\n') {
                            inComment = false;
                            result += '\n' + ' '.repeat(indentLevel * indentSize);
                            continue;
                        }
                        if (inComment && currentChar === '*' && nextChar === '/') {
                            inComment = false;
                            result += currentChar + nextChar;
                            i++;
                            continue;
                        }
                        
                        // Handle strings
                        if (currentChar === '"' || currentChar === "'") {
                            if (!inString || lastChar !== '\\') {
                                inString = !inString;
                            }
                        }
                        
                        // Handle indentation
                        if (!inString && !inComment) {
                            if (currentChar === '{' || currentChar === '[') {
                                indentLevel++;
                                result += currentChar + '\n' + ' '.repeat(indentLevel * indentSize);
                                lastChar = '\n';
                                continue;
                            }
                            if (currentChar === '}' || currentChar === ']') {
                                indentLevel = Math.max(0, indentLevel - 1);
                                result += '\n' + ' '.repeat(indentLevel * indentSize) + currentChar;
                                lastChar = currentChar;
                                continue;
                            }
                            if (currentChar === ';') {
                                result += currentChar + '\n' + ' '.repeat(indentLevel * indentSize);
                                lastChar = '\n';
                                continue;
                            }
                            if (currentChar === ',') {
                                result += currentChar + '\n' + ' '.repeat(indentLevel * indentSize);
                                lastChar = '\n';
                                continue;
                            }
                            if (currentChar === ':') {
                                result += currentChar + ' ';
                                lastChar = ' ';
                                continue;
                            }
                        }
                        
                        // Add space after keywords
                        if (!inString && !inComment && /[;{}]/.test(lastChar) && currentChar !== '\n' && currentChar !== ' ') {
                            result += ' ' + currentChar;
                        } else if (!inString && !inComment && lastChar === ' ' && currentChar === ' ') {
                            // Skip multiple spaces
                        } else {
                            result += currentChar;
                        }
                        
                        lastChar = currentChar;
                    }
                    
                    // Clean up extra newlines
                    formatted = result
                        .replace(/\n\s*\n/g, '\n\n')
                        .replace(/^\s+/gm, match => match.trim())
                        .trim();
                    
                    return formatted;
                } catch (error) {
                    console.error("Formatting error:", error);
                    return "Error formatting code. Please check your JavaScript syntax.";
                }
            }

            // Minify JavaScript code
            function minifyJS(code) {
                if (!code.trim()) return '';
                
                try {
                    // Remove comments if option is disabled
                    if (!preserveComments.checked) {
                        // Remove single line comments
                        code = code.replace(/\/\/.*$/gm, '');
                        // Remove multi-line comments
                        code = code.replace(/\/\*[\s\S]*?\*\//g, '');
                    }
                    
                    // Basic minification
                    let minified = code
                        .replace(/\/\*[\s\S]*?\*\//g, '') // Remove comments (if not preserved)
                        .replace(/\s+/g, ' ') // Replace multiple spaces with single space
                        .replace(/\s*{\s*/g, '{') // Remove spaces around {
                        .replace(/\s*}\s*/g, '}') // Remove spaces around }
                        .replace(/\s*\(\s*/g, '(') // Remove spaces around (
                        .replace(/\s*\)\s*/g, ')') // Remove spaces around )
                        .replace(/\s*\[\s*/g, '[') // Remove spaces around [
                        .replace(/\s*\]\s*/g, ']') // Remove spaces around ]
                        .replace(/\s*;\s*/g, ';') // Remove spaces around ;
                        .replace(/\s*,\s*/g, ',') // Remove spaces around ,
                        .replace(/\s*:\s*/g, ':') // Remove spaces around :
                        .replace(/\s*\+\s*/g, '+') // Remove spaces around +
                        .replace(/\s*-\s*/g, '-') // Remove spaces around -
                        .replace(/\s*\*\s*/g, '*') // Remove spaces around *
                        .replace(/\s*\/\s*/g, '/') // Remove spaces around /
                        .replace(/\s*%\s*/g, '%') // Remove spaces around %
                        .replace(/\s*=\s*/g, '=') // Remove spaces around =
                        .replace(/;}/g, '}') // Remove trailing ; before }
                        .trim();
                    
                    return minified;
                } catch (error) {
                    console.error("Minification error:", error);
                    return "Error minifying code. Please check your JavaScript syntax.";
                }
            }

            // Clear input and output
            clearBtn.addEventListener('click', function() {
                jsInput.value = '';
                jsOutput.value = '';
                updateSizeInfo();
            });

            // Load sample JavaScript
            loadSampleBtn.addEventListener('click', function() {
                jsInput.value = 'function greet(name) {\n  console.log("Hello, " + name + "!");\n  return "Greeted " + name;\n}\n\n// Call the function\ngreet("World");';
                updateSizeInfo();
            });

            // Format button click
            formatBtn.addEventListener('click', function() {
                jsOutput.value = formatJS(jsInput.value);
                updateSizeInfo();
            });

            // Minify button click
            minifyBtn.addEventListener('click', function() {
                jsOutput.value = minifyJS(jsInput.value);
                updateSizeInfo();
            });

            // Copy to clipboard
            copyBtn.addEventListener('click', function() {
                jsOutput.select();
                jsOutput.setSelectionRange(0, 99999);
                
                try {
                    document.execCommand('copy');
                    // Show notification
                    copyNotification.classList.add('active');
                    setTimeout(() => {
                        copyNotification.classList.remove('active');
                    }, 2000);
                } catch (err) {
                    console.error('Failed to copy:', err);
                }
            });

            // Load beautify example
            beautifyExampleBtn.addEventListener('click', function() {
                const minifiedCode = 'function calculateSum(a,b){return a+b;}const result=calculateSum(5,3);console.log("Sum:",result);';
                jsInput.value = minifiedCode;
                jsOutput.value = formatJS(minifiedCode);
                updateSizeInfo();
            });

            // Load minify example
            minifyExampleBtn.addEventListener('click', function() {
                const formattedCode = 'function calculateSum(a, b) {\n  return a + b;\n}\n\nconst result = calculateSum(5, 3);\nconsole.log("Sum:", result);';
                jsInput.value = formattedCode;
                jsOutput.value = minifyJS(formattedCode);
                updateSizeInfo();
            });

            // Example tabs
            exampleTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remove active class from all tabs and contents
                    exampleTabs.forEach(t => t.classList.remove('active'));
                    exampleContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    tab.classList.add('active');
                    document.getElementById(`${tab.dataset.example}-example`).classList.add('active');
                });
            });

            // Initial size update
            updateSizeInfo();
        });
    </script>
</body>
</html>